<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Insect Identifier ‚Äì Identify Any Insect Instantly</title>
    <meta name="description" content="Upload or capture an insect photo to identify its name, species, and details instantly using AI simulation. Fast, responsive, and educational.">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üêû</text></svg>">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #4a7c59;
            --primary-light: #6a9c7a;
            --secondary: #d4b483;
            --secondary-light: #e8d5b5;
            --background: #f9f5eb;
            --card: #ffffff;
            --text: #333333;
            --text-light: #666666;
            --shadow: rgba(0, 0, 0, 0.1);
            --success: #4caf50;
            --warning: #ff9800;
            --danger: #f44336;
        }

        .dark-mode {
            --primary: #3a6b49;
            --primary-light: #4a7c59;
            --secondary: #c4a473;
            --secondary-light: #d4b483;
            --background: #1a1a1a;
            --card: #2d2d2d;
            --text: #f0f0f0;
            --text-light: #cccccc;
            --shadow: rgba(0, 0, 0, 0.3);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background-color: var(--background);
            color: var(--text);
            line-height: 1.6;
            transition: background-color 0.3s, color 0.3s;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            background-image: 
                radial-gradient(circle at 10% 20%, rgba(74, 124, 89, 0.05) 0%, transparent 20%),
                radial-gradient(circle at 90% 80%, rgba(212, 180, 131, 0.05) 0%, transparent 20%);
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            width: 100%;
            flex: 1;
            display: flex;
            flex-direction: column;
        }

        header {
            text-align: center;
            padding: 20px 0;
            margin-bottom: 20px;
        }

        h1 {
            font-size: 2.5rem;
            color: var(--primary);
            margin-bottom: 10px;
            font-weight: 700;
        }

        .tagline {
            font-size: 1.1rem;
            color: var(--text-light);
            margin-bottom: 20px;
        }

        .theme-toggle {
            position: absolute;
            top: 20px;
            right: 20px;
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--text);
            transition: transform 0.3s;
        }

        .theme-toggle:hover {
            transform: rotate(20deg);
        }

        .card {
            background-color: var(--card);
            border-radius: 16px;
            box-shadow: 0 4px 20px var(--shadow);
            padding: 30px;
            margin-bottom: 20px;
            transition: all 0.3s ease;
        }

        .upload-section {
            text-align: center;
        }

        .upload-area {
            border: 2px dashed var(--secondary);
            border-radius: 12px;
            padding: 40px 20px;
            margin: 20px 0;
            background-color: rgba(212, 180, 131, 0.05);
            transition: all 0.3s;
            cursor: pointer;
        }

        .upload-area:hover {
            border-color: var(--primary);
            background-color: rgba(74, 124, 89, 0.05);
        }

        .upload-area.active {
            border-color: var(--primary);
            background-color: rgba(74, 124, 89, 0.1);
        }

        .upload-icon {
            font-size: 3rem;
            margin-bottom: 15px;
            color: var(--secondary);
        }

        .upload-text {
            margin-bottom: 20px;
            color: var(--text-light);
        }

        .button-group {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 50px;
            font-family: 'Poppins', sans-serif;
            font-size: 1rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            min-height: 50px;
        }

        .btn-primary {
            background-color: var(--primary);
            color: white;
        }

        .btn-primary:hover {
            background-color: var(--primary-light);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(74, 124, 89, 0.3);
        }

        .btn-secondary {
            background-color: var(--secondary);
            color: white;
        }

        .btn-secondary:hover {
            background-color: var(--secondary-light);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(212, 180, 131, 0.3);
        }

        .btn-outline {
            background-color: transparent;
            color: var(--primary);
            border: 2px solid var(--primary);
        }

        .btn-outline:hover {
            background-color: rgba(74, 124, 89, 0.1);
        }

        .btn-icon {
            font-size: 1.2rem;
        }

        .image-preview {
            max-width: 100%;
            max-height: 300px;
            border-radius: 12px;
            margin: 20px auto;
            display: block;
            box-shadow: 0 4px 12px var(--shadow);
        }

        .hidden {
            display: none;
        }

        .loading-section {
            text-align: center;
            padding: 40px 20px;
        }

        .loading-spinner {
            width: 60px;
            height: 60px;
            border: 5px solid rgba(74, 124, 89, 0.2);
            border-radius: 50%;
            border-top-color: var(--primary);
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .progress-bar {
            height: 6px;
            background-color: rgba(74, 124, 89, 0.2);
            border-radius: 3px;
            margin: 20px 0;
            overflow: hidden;
        }

        .progress {
            height: 100%;
            background-color: var(--primary);
            width: 0%;
            transition: width 0.5s ease;
        }

        .result-section {
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .result-header {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
            gap: 20px;
            flex-wrap: wrap;
        }

        .result-image {
            width: 120px;
            height: 120px;
            border-radius: 12px;
            object-fit: cover;
            box-shadow: 0 4px 12px var(--shadow);
        }

        .result-info {
            flex: 1;
        }

        .insect-name {
            font-size: 1.8rem;
            color: var(--primary);
            margin-bottom: 5px;
        }

        .scientific-name {
            font-style: italic;
            color: var(--text-light);
            margin-bottom: 15px;
        }

        .confidence {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 20px;
        }

        .confidence-bar {
            flex: 1;
            height: 10px;
            background-color: rgba(74, 124, 89, 0.2);
            border-radius: 5px;
            overflow: hidden;
        }

        .confidence-fill {
            height: 100%;
            background-color: var(--primary);
            border-radius: 5px;
            transition: width 1s ease;
        }

        .confidence-text {
            font-weight: 500;
            color: var(--primary);
        }

        .description {
            margin-bottom: 25px;
            line-height: 1.7;
        }

        .result-actions {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }

        .recent-section {
            margin-top: 30px;
        }

        .recent-title {
            font-size: 1.2rem;
            margin-bottom: 15px;
            color: var(--primary);
        }

        .recent-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 15px;
        }

        .recent-item {
            background-color: var(--card);
            border-radius: 12px;
            padding: 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 2px 8px var(--shadow);
        }

        .recent-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 15px var(--shadow);
        }

        .recent-image {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            object-fit: cover;
            margin-bottom: 10px;
        }

        .recent-name {
            font-size: 0.9rem;
            font-weight: 500;
            color: var(--text);
        }

        footer {
            text-align: center;
            padding: 20px;
            margin-top: 30px;
            color: var(--text-light);
            font-size: 0.9rem;
        }

        /* Responsive adjustments */
        @media (max-width: 768px) {
            h1 {
                font-size: 2rem;
            }
            
            .card {
                padding: 20px;
            }
            
            .button-group {
                flex-direction: column;
            }
            
            .btn {
                width: 100%;
            }
            
            .result-header {
                flex-direction: column;
                text-align: center;
            }
            
            .result-actions {
                flex-direction: column;
            }
        }

        @media (max-width: 480px) {
            .container {
                padding: 10px;
            }
            
            h1 {
                font-size: 1.8rem;
            }
            
            .upload-area {
                padding: 30px 15px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <button class="theme-toggle" id="themeToggle" aria-label="Toggle dark mode">üåô</button>
            <h1>Insect Identifier</h1>
            <p class="tagline">Identify any insect instantly using AI</p>
        </header>

        <main>
            <!-- Upload Section -->
            <section class="card upload-section" id="uploadSection">
                <h2>Upload or Capture an Insect Image</h2>
                <div class="upload-area" id="uploadArea">
                    <div class="upload-icon">üêû</div>
                    <p class="upload-text">Drag & drop an image here or click to browse</p>
                    <p>Supported formats: JPG, PNG, WebP</p>
                </div>
                <input type="file" id="fileInput" accept="image/*" class="hidden">
                <div class="button-group">
                    <button class="btn btn-primary" id="uploadBtn">
                        <span class="btn-icon">üìÅ</span> Upload Image
                    </button>
                    <button class="btn btn-secondary" id="cameraBtn">
                        <span class="btn-icon">üì∑</span> Capture with Camera
                    </button>
                </div>
            </section>

            <!-- Loading Section -->
            <section class="card loading-section hidden" id="loadingSection">
                <h2>Analyzing Image...</h2>
                <div class="loading-spinner"></div>
                <p>Our AI is identifying your insect</p>
                <div class="progress-bar">
                    <div class="progress" id="progressBar"></div>
                </div>
            </section>

            <!-- Result Section -->
            <section class="card result-section hidden" id="resultSection">
                <div class="result-header">
                    <img src="" alt="Identified insect" class="result-image" id="resultImage">
                    <div class="result-info">
                        <h2 class="insect-name" id="insectName"></h2>
                        <p class="scientific-name" id="scientificName"></p>
                        <div class="confidence">
                            <div class="confidence-bar">
                                <div class="confidence-fill" id="confidenceFill"></div>
                            </div>
                            <span class="confidence-text" id="confidenceText"></span>
                        </div>
                    </div>
                </div>
                <div class="description" id="insectDescription"></div>
                <div class="result-actions">
                    <button class="btn btn-primary" id="learnMoreBtn">
                        <span class="btn-icon">üìö</span> Learn More
                    </button>
                    <button class="btn btn-outline" id="speakBtn">
                        <span class="btn-icon">üîä</span> Listen
                    </button>
                    <button class="btn btn-outline" id="shareBtn">
                        <span class="btn-icon">üì§</span> Share
                    </button>
                    <button class="btn btn-outline" id="tryAgainBtn">
                        <span class="btn-icon">üîÑ</span> Try Another
                    </button>
                </div>
            </section>

            <!-- Recent Identifications -->
            <section class="recent-section" id="recentSection">
                <h3 class="recent-title">Recent Identifications</h3>
                <div class="recent-list" id="recentList">
                    <!-- Recent items will be added here dynamically -->
                </div>
            </section>
        </main>

        <footer>
            <p>¬© 2025 Insect Identifier | Built by Kelo TV</p>
        </footer>
    </div>

    <script>
        // DOM Elements
        const uploadSection = document.getElementById('uploadSection');
        const loadingSection = document.getElementById('loadingSection');
        const resultSection = document.getElementById('resultSection');
        const recentSection = document.getElementById('recentSection');
        const uploadArea = document.getElementById('uploadArea');
        const fileInput = document.getElementById('fileInput');
        const uploadBtn = document.getElementById('uploadBtn');
        const cameraBtn = document.getElementById('cameraBtn');
        const tryAgainBtn = document.getElementById('tryAgainBtn');
        const learnMoreBtn = document.getElementById('learnMoreBtn');
        const speakBtn = document.getElementById('speakBtn');
        const shareBtn = document.getElementById('shareBtn');
        const themeToggle = document.getElementById('themeToggle');
        const progressBar = document.getElementById('progressBar');
        const resultImage = document.getElementById('resultImage');
        const insectName = document.getElementById('insectName');
        const scientificName = document.getElementById('scientificName');
        const confidenceFill = document.getElementById('confidenceFill');
        const confidenceText = document.getElementById('confidenceText');
        const insectDescription = document.getElementById('insectDescription');
        const recentList = document.getElementById('recentList');

        // Sample insect data for simulation
        const insectData = [
            {
                name: "Monarch Butterfly",
                scientificName: "Danaus plexippus",
                description: "The monarch butterfly is known for its incredible long-distance migration and distinctive orange and black pattern. They primarily feed on milkweed, which makes them toxic to predators. Monarchs are found throughout North America and are not dangerous to humans.",
                confidence: 92,
                image: "https://images.unsplash.com/photo-1551969014-7d2c4cddf0b6?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60",
                wikiUrl: "https://en.wikipedia.org/wiki/Monarch_butterfly"
            },
            {
                name: "Honey Bee",
                scientificName: "Apis mellifera",
                description: "Honey bees are social insects known for producing honey and beeswax. They live in large colonies with a single queen, many workers, and some drones. While they can sting when threatened, they are generally not aggressive unless provoked. Honey bees are crucial pollinators for many plants.",
                confidence: 88,
                image: "https://images.unsplash.com/photo-1585435557343-3b092031d5ad?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60",
                wikiUrl: "https://en.wikipedia.org/wiki/Honey_bee"
            },
            {
                name: "Ladybug",
                scientificName: "Coccinellidae",
                description: "Ladybugs, also known as ladybirds, are small beetles recognized by their spotted red or orange wing covers. They are beneficial insects that feed on aphids and other plant pests. Ladybugs are harmless to humans and are considered symbols of good luck in many cultures.",
                confidence: 95,
                image: "https://images.unsplash.com/photo-1596733430284-f7437764b1a9?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60",
                wikiUrl: "https://en.wikipedia.org/wiki/Coccinellidae"
            },
            {
                name: "Praying Mantis",
                scientificName: "Mantodea",
                description: "Praying mantises are predatory insects known for their distinctive posture and raptorial front legs. They are ambush predators that feed on other insects. While they can bite if handled, they are not dangerous to humans. Mantises are found in temperate and tropical habitats worldwide.",
                confidence: 85,
                image: "https://images.unsplash.com/photo-1578662996442-48f60103fc96?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60",
                wikiUrl: "https://en.wikipedia.org/wiki/Mantis"
            },
            {
                name: "Mosquito",
                scientificName: "Culicidae",
                description: "Mosquitoes are small flying insects known for their biting habit. Female mosquitoes require blood meals to develop their eggs. They can transmit diseases like malaria, dengue, and Zika virus. Mosquitoes are found worldwide, especially in warm, humid environments.",
                confidence: 90,
                image: "https://images.unsplash.com/photo-1529307474715-0c8cdeb26b01?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60",
                wikiUrl: "https://en.wikipedia.org/wiki/Mosquito"
            },
            {
                name: "Dragonfly",
                scientificName: "Anisoptera",
                description: "Dragonflies are flying insects characterized by large multifaceted eyes, two pairs of strong transparent wings, and an elongated body. They are skilled predators that feed on mosquitoes and other small insects. Dragonflies are harmless to humans and are found near freshwater habitats.",
                confidence: 87,
                image: "https://images.unsplash.com/photo-1597007118034-1c0ee0f4263d?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60",
                wikiUrl: "https://en.wikipedia.org/wiki/Dragonfly"
            },
            {
                name: "Firefly",
                scientificName: "Lampyridae",
                description: "Fireflies, also known as lightning bugs, are beetles known for their bioluminescence. They use light flashes to attract mates. Fireflies are found in temperate and tropical environments, typically in moist areas. They are harmless to humans and are most active at dusk.",
                confidence: 83,
                image: "https://images.unsplash.com/photo-1596464716127-f2a82984de30?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60",
                wikiUrl: "https://en.wikipedia.org/wiki/Firefly"
            },
            {
                name: "Grasshopper",
                scientificName: "Caelifera",
                description: "Grasshoppers are herbivorous insects known for their powerful hind legs adapted for jumping. They can be agricultural pests when present in large numbers. Grasshoppers are found in grasslands, forests, and agricultural areas worldwide. They are harmless to humans.",
                confidence: 89,
                image: "https://images.unsplash.com/photo-1566228015668-4c45ecef47c3?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60",
                wikiUrl: "https://en.wikipedia.org/wiki/Grasshopper"
            }
        ];

        // State variables
        let currentInsect = null;
        let recentIdentifications = JSON.parse(localStorage.getItem('recentIdentifications')) || [];

        // Initialize the app
        function init() {
            // Event listeners
            uploadBtn.addEventListener('click', () => fileInput.click());
            fileInput.addEventListener('change', handleFileSelect);
            cameraBtn.addEventListener('click', openCamera);
            tryAgainBtn.addEventListener('click', resetApp);
            learnMoreBtn.addEventListener('click', openLearnMore);
            speakBtn.addEventListener('click', speakResult);
            shareBtn.addEventListener('click', shareResult);
            themeToggle.addEventListener('click', toggleTheme);
            
            // Drag and drop functionality
            uploadArea.addEventListener('dragover', (e) => {
                e.preventDefault();
                uploadArea.classList.add('active');
            });
            
            uploadArea.addEventListener('dragleave', () => {
                uploadArea.classList.remove('active');
            });
            
            uploadArea.addEventListener('drop', (e) => {
                e.preventDefault();
                uploadArea.classList.remove('active');
                
                if (e.dataTransfer.files.length) {
                    handleFile(e.dataTransfer.files[0]);
                }
            });
            
            uploadArea.addEventListener('click', () => fileInput.click());
            
            // Load recent identifications
            displayRecentIdentifications();
            
            // Check if dark mode is preferred
            if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
                document.body.classList.add('dark-mode');
                themeToggle.textContent = '‚òÄÔ∏è';
            }
        }

        // Handle file selection
        function handleFileSelect(e) {
            if (e.target.files.length) {
                handleFile(e.target.files[0]);
            }
        }

        // Process the selected file
        function handleFile(file) {
            if (!file.type.match('image.*')) {
                alert('Please select an image file.');
                return;
            }
            
            const reader = new FileReader();
            reader.onload = (e) => {
                // Show loading section
                uploadSection.classList.add('hidden');
                loadingSection.classList.remove('hidden');
                resultSection.classList.add('hidden');
                
                // Simulate AI processing with progress bar
                simulateProcessing(e.target.result);
            };
            reader.readAsDataURL(file);
        }

        // Simulate AI processing
        function simulateProcessing(imageData) {
            let progress = 0;
            const interval = setInterval(() => {
                progress += Math.random() * 10;
                if (progress >= 100) {
                    progress = 100;
                    clearInterval(interval);
                    
                    // Select a random insect from our data
                    const randomIndex = Math.floor(Math.random() * insectData.length);
                    currentInsect = insectData[randomIndex];
                    currentInsect.imageData = imageData;
                    
                    // Add to recent identifications
                    addToRecent(currentInsect);
                    
                    // Show results after a short delay
                    setTimeout(showResults, 500);
                }
                progressBar.style.width = `${progress}%`;
            }, 200);
        }

        // Show identification results
        function showResults() {
            loadingSection.classList.add('hidden');
            resultSection.classList.remove('hidden');
            
            // Populate result data
            resultImage.src = currentInsect.imageData;
            insectName.textContent = currentInsect.name;
            scientificName.textContent = currentInsect.scientificName;
            insectDescription.textContent = currentInsect.description;
            
            // Set confidence
            confidenceFill.style.width = `${currentInsect.confidence}%`;
            confidenceText.textContent = `${currentInsect.confidence}% confidence`;
            
            // Update recent identifications display
            displayRecentIdentifications();
        }

        // Reset the app to initial state
        function resetApp() {
            resultSection.classList.add('hidden');
            uploadSection.classList.remove('hidden');
            fileInput.value = '';
            currentInsect = null;
        }

        // Open camera for mobile devices
        function openCamera() {
            if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {
                navigator.mediaDevices.getUserMedia({ video: true })
                    .then((stream) => {
                        // In a real app, we would show a camera preview and capture an image
                        // For this simulation, we'll use a random insect image
                        alert('Camera would open here. For this demo, we\'ll use a sample image.');
                        
                        // Stop the camera stream
                        stream.getTracks().forEach(track => track.stop());
                        
                        // Use a random sample image for simulation
                        const randomIndex = Math.floor(Math.random() * insectData.length);
                        const sampleImage = new Image();
                        sampleImage.onload = () => {
                            const canvas = document.createElement('canvas');
                            canvas.width = sampleImage.width;
                            canvas.height = sampleImage.height;
                            const ctx = canvas.getContext('2d');
                            ctx.drawImage(sampleImage, 0, 0);
                            
                            // Show loading section
                            uploadSection.classList.add('hidden');
                            loadingSection.classList.remove('hidden');
                            resultSection.classList.add('hidden');
                            
                            // Simulate processing with the captured image
                            simulateProcessing(canvas.toDataURL('image/jpeg'));
                        };
                        sampleImage.src = insectData[randomIndex].image;
                    })
                    .catch((error) => {
                        console.error('Error accessing camera:', error);
                        alert('Unable to access camera. Please check your permissions or try uploading an image instead.');
                    });
            } else {
                alert('Camera not supported on this device. Please upload an image instead.');
            }
        }

        // Open learn more link
        function openLearnMore() {
            if (currentInsect && currentInsect.wikiUrl) {
                window.open(currentInsect.wikiUrl, '_blank');
            }
        }

        // Speak the result using text-to-speech
        function speakResult() {
            if (!currentInsect) return;
            
            const speech = new SpeechSynthesisUtterance();
            speech.text = `${currentInsect.name}. ${currentInsect.description}`;
            speech.rate = 0.9;
            speech.pitch = 1;
            speech.volume = 1;
            
            window.speechSynthesis.speak(speech);
        }

        // Share the result
        function shareResult() {
            if (!currentInsect) return;
            
            const shareData = {
                title: `I identified a ${currentInsect.name} using Insect Identifier!`,
                text: `I used Insect Identifier to identify a ${currentInsect.name} (${currentInsect.scientificName}). ${currentInsect.description.substring(0, 100)}...`,
                url: window.location.href
            };
            
            if (navigator.share) {
                navigator.share(shareData)
                    .catch((error) => console.log('Error sharing:', error));
            } else {
                // Fallback: copy to clipboard
                const textArea = document.createElement('textarea');
                textArea.value = `${shareData.title}\n\n${shareData.text}\n\n${shareData.url}`;
                document.body.appendChild(textArea);
                textArea.select();
                document.execCommand('copy');
                document.body.removeChild(textArea);
                alert('Result copied to clipboard!');
            }
        }

        // Toggle dark/light mode
        function toggleTheme() {
            document.body.classList.toggle('dark-mode');
            themeToggle.textContent = document.body.classList.contains('dark-mode') ? '‚òÄÔ∏è' : 'üåô';
        }

        // Add identification to recent list
        function addToRecent(insect) {
            // Check if already in recent list
            const existingIndex = recentIdentifications.findIndex(item => 
                item.name === insect.name && item.scientificName === insect.scientificName);
            
            if (existingIndex !== -1) {
                // Remove existing entry to add it to the top
                recentIdentifications.splice(existingIndex, 1);
            }
            
            // Add to beginning of array
            recentIdentifications.unshift({
                name: insect.name,
                scientificName: insect.scientificName,
                imageData: insect.imageData,
                timestamp: new Date().toISOString()
            });
            
            // Keep only the last 6 identifications
            if (recentIdentifications.length > 6) {
                recentIdentifications = recentIdentifications.slice(0, 6);
            }
            
            // Save to localStorage
            localStorage.setItem('recentIdentifications', JSON.stringify(recentIdentifications));
        }

        // Display recent identifications
        function displayRecentIdentifications() {
            if (recentIdentifications.length === 0) {
                recentSection.classList.add('hidden');
                return;
            }
            
            recentSection.classList.remove('hidden');
            recentList.innerHTML = '';
            
            recentIdentifications.forEach(insect => {
                const item = document.createElement('div');
                item.className = 'recent-item';
                item.innerHTML = `
                    <img src="${insect.imageData}" alt="${insect.name}" class="recent-image">
                    <div class="recent-name">${insect.name}</div>
                `;
                
                item.addEventListener('click', () => {
                    // Find the full insect data
                    const fullInsectData = insectData.find(item => 
                        item.name === insect.name && item.scientificName === insect.scientificName);
                    
                    if (fullInsectData) {
                        currentInsect = {...fullInsectData, imageData: insect.imageData};
                        showResults();
                    }
                });
                
                recentList.appendChild(item);
            });
        }

        // Initialize the app when DOM is loaded
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>
